<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="indexStyleSheet.css">

    <title>Train AI Tester</title>
</head>
<body>
    <sript src="videoHandler.js"></sript>
    <div class="content-wrapper">
        <div class="video-wrapper">
            <!-- <video id="video" width="640" height="360" controls>
                <source src="/test_videos/train-sim-test-1.mkv" type="video/mkv">
                Your browser does not support the video tag.
            </video> -->
        </div>
        <input type="file" id="videoInput" accept="video/*">
        <video id="videoPreview" width="640" height="360" controls></video>
        <canvas id="canvas" width="640" height="360" style="display:none;"></canvas>
        <img id="frame" />
        <script>
            document.getElementById("videoInput").addEventListener("change", function(event) {
                const file = event.target.files[0];
                if (file) {
                    const videoURL = URL.createObjectURL(file);
                    const video = document.createElement("video"); // Create a hidden video element
                    video.src = videoURL;
                    video.muted = true; // Mute to allow autoplay
                    video.play();

                    video.onloadeddata = function () {
                        const canvas = document.getElementById("canvas");
                        const ctx = canvas.getContext("2d");

                        video.currentTime = 1; // Capture at 1s (adjust as needed)

                        video.onseeked = function () {
                            ctx.drawImage(video, 0, 0, canvas.width, canvas.height); // Draw frame to canvas
                            const base64Image = canvas.toDataURL("image/png"); // or "image/jpeg"

                            console.log(base64Image); // Logs the Base64 string
                            document.getElementById("frame").src = base64Image; // Display captured frame
                            URL.revokeObjectURL(videoURL); // Clean up
                        };
                    };
                }
            });
        </script>

    </div>
    
</body>
</html>  